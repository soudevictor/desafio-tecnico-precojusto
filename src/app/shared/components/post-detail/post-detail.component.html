<div class="post-detail min-h-screen">
  <div class="post-detail__container max-w-2xl mx-auto px-4 py-6">
    <!-- NOTE: Header com navegação -->
    <div class="post-detail__nav mb-4">
      <a
        routerLink="/"
        class="inline-flex items-center gap-2 text-slate-600 hover:text-blue-600 font-medium transition-all duration-200"
        aria-label="Voltar para lista de posts"
      >
        <i class="fa-solid fa-arrow-left"></i>
        <span>Voltar ao Feed</span>
      </a>
    </div>

    @if (isLoading()) {
    <div class="bg-white rounded-xl shadow-sm border border-slate-200">
      <app-spinner mensagem="Carregando post..." tamanho="lg" />
    </div>
    } @else if (post()) {

    <!-- NOTE: Card principal do post (estilo rede social) -->
    <article
      class="post-detail__article bg-white rounded-xl shadow-sm border border-slate-200 mb-4"
    >
      <!-- Header do Card: Avatar + Autor + Data + Ações -->
      <div class="flex items-center gap-3 p-4 border-b border-slate-100">
        <div
          class="w-12 h-12 rounded-full bg-blue-600 flex items-center justify-center text-white font-bold text-lg"
        >
          {{ post()!.userId }}
        </div>
        <div class="flex-1">
          <h3 class="font-semibold text-slate-800">Usuário {{ post()!.userId }}</h3>
          <p class="text-xs text-slate-400">
            <i class="fa-solid fa-clock mr-1"></i>
            há {{ post()!.id }} horas • Post #{{ post()!.id }}
          </p>
        </div>
        <!-- Botão de editar -->
        <a
          [routerLink]="['/post', post()!.id, 'edit']"
          class="flex items-center gap-2 px-3 py-2 text-blue-600 hover:bg-blue-50 rounded-lg text-sm font-medium transition-all duration-200"
          aria-label="Editar este post"
        >
          <i class="fa-solid fa-pen"></i>
          <span class="hidden sm:inline">Editar</span>
        </a>
      </div>

      <!-- Corpo do Post -->
      <div class="p-4 sm:p-6">
        <h1 class="text-xl sm:text-2xl font-bold text-slate-900 mb-4 leading-tight">
          {{ post()!.title }}
        </h1>
        <p class="text-slate-600 leading-relaxed whitespace-pre-line">
          {{ post()!.body }}
        </p>
      </div>

      <!-- Footer do Post: Estatísticas -->
      <div
        class="px-4 py-3 border-t border-slate-100 flex items-center gap-4 text-sm text-slate-500"
      >
        <span class="flex items-center gap-1">
          <i class="fa-regular fa-comment"></i>
          {{ comments().length }} comentário(s)
        </span>
      </div>
    </article>

    <!-- NOTE: Seção de Comentários (estilo conversa) -->
    <section
      class="post-detail__comments bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden"
    >
      <app-comment-list
        [comments]="comments()"
        [postId]="post()!.id"
        (comentarioAdicionado)="onComentarioAdicionado($event)"
        (comentarioExcluido)="onComentarioExcluido($event)"
      />
    </section>

    } @else {
    <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-8 text-center">
      <div class="w-16 h-16 mx-auto mb-4 rounded-full bg-red-100 flex items-center justify-center">
        <i class="fa-solid fa-circle-exclamation text-2xl text-red-500"></i>
      </div>
      <p class="text-slate-600">Post não encontrado.</p>
      <a routerLink="/" class="mt-3 inline-block text-blue-600 hover:underline text-sm"
        >Voltar ao feed</a
      >
    </div>
    }
  </div>
</div>
