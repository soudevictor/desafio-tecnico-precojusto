<div class="comment-list">
  <div class="flex items-center justify-between mb-4">
    <h2 class="text-2xl font-bold text-gray-800">Coment√°rios ({{ comments.length }})</h2>

    <!-- NOTE: Bot√£o pra mostrar/esconder formul√°rio -->
    <button
      (click)="toggleFormulario()"
      class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium transition-colors"
      aria-label="Adicionar novo coment√°rio"
    >
      {{ mostrarFormulario() ? '‚úï Cancelar' : '+ Adicionar Coment√°rio' }}
    </button>
  </div>

  <!-- NOTE: Formul√°rio de novo coment√°rio -->
  @if (mostrarFormulario()) {
  <div class="comment-list__form bg-white p-4 rounded-lg shadow mb-6 border-l-4 border-green-500">
    <h3 class="text-lg font-semibold text-gray-800 mb-4">Novo Coment√°rio</h3>

    <div class="space-y-4">
      <div>
        <label for="nome" class="block text-sm font-medium text-gray-700 mb-1">Nome</label>
        <input
          id="nome"
          type="text"
          [ngModel]="novoNome()"
          (ngModelChange)="novoNome.set($event)"
          placeholder="Seu nome..."
          class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"
          aria-required="true"
        />
      </div>

      <div>
        <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email</label>
        <input
          id="email"
          type="email"
          [ngModel]="novoEmail()"
          (ngModelChange)="novoEmail.set($event)"
          placeholder="seu@email.com"
          class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"
          aria-required="true"
        />
      </div>

      <div>
        <label for="corpo" class="block text-sm font-medium text-gray-700 mb-1">Coment√°rio</label>
        <textarea
          id="corpo"
          [ngModel]="novoCorpo()"
          (ngModelChange)="novoCorpo.set($event)"
          placeholder="Escreva seu coment√°rio..."
          rows="3"
          class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 resize-none"
          aria-required="true"
        ></textarea>
      </div>

      <div class="flex justify-end">
        <button
          (click)="adicionarComentario()"
          class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium transition-colors"
        >
          Enviar Coment√°rio
        </button>
      </div>
    </div>
  </div>
  }

  <!-- NOTE: Lista de coment√°rios -->
  <ul class="comment-list__items space-y-4">
    @for (comment of comments; track comment.id) {
    <li class="comment-list__item bg-white p-4 rounded-lg shadow hover:shadow-md transition-shadow">
      <div class="flex justify-between items-start">
        <div class="comment-list__header mb-2 flex-1">
          <h3 class="text-lg font-semibold text-gray-900">{{ comment.name }}</h3>
          <p class="text-sm text-gray-500">{{ comment.email }}</p>
        </div>

        <!-- NOTE: Bot√£o de excluir com aria-label pra acessibilidade -->
        <button
          (click)="excluirComentario(comment.id)"
          class="text-red-500 hover:text-red-700 p-1 transition-colors"
          [attr.aria-label]="'Excluir coment√°rio de ' + comment.name"
          title="Excluir coment√°rio"
        >
          üóëÔ∏è
        </button>
      </div>

      <div class="comment-list__body">
        <p class="text-gray-700">{{ comment.body }}</p>
      </div>
    </li>
    } @empty {
    <li class="text-gray-500 text-center py-8">
      Nenhum coment√°rio ainda. Seja o primeiro a comentar!
    </li>
    }
  </ul>
</div>
