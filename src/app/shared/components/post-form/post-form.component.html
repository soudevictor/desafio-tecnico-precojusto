<div class="post-form min-h-screen">
  <div class="post-form__container max-w-2xl mx-auto px-4 py-6">
    <!-- NOTE: Header com navegação -->
    <div class="post-form__nav mb-4">
      <a
        routerLink="/"
        class="inline-flex items-center gap-2 text-slate-600 hover:text-blue-600 font-medium transition-all duration-200"
        aria-label="Voltar para lista de posts"
      >
        <i class="fa-solid fa-arrow-left"></i>
        <span>Voltar ao Feed</span>
      </a>
    </div>

    @if (errorMessage()) {
    <div
      class="flex items-center gap-2 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl mb-4"
      role="alert"
      aria-live="polite"
    >
      <i class="fa-solid fa-circle-exclamation"></i>
      <span>{{ errorMessage() }}</span>
    </div>
    } @if (isLoading()) {
    <div class="bg-white rounded-xl shadow-sm border border-slate-200">
      <app-spinner mensagem="Carregando..." />
    </div>
    } @else {

    <!-- NOTE: Card do formulário (estilo rede social) -->
    <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
      <!-- Header do Card -->
      <div class="flex items-center gap-3 p-4 border-b border-slate-100">
        <div class="w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center text-white">
          @if (isEdicao) {
          <i class="fa-solid fa-pen"></i>
          } @else {
          <i class="fa-solid fa-plus"></i>
          }
        </div>
        <div>
          <h1 class="font-semibold text-slate-800">
            {{ isEdicao ? 'Editar Post' : 'Criar Novo Post' }}
          </h1>
          <p class="text-xs text-slate-400">
            {{
              isEdicao
                ? 'Atualize as informações do seu post'
                : 'Compartilhe suas ideias com o mundo'
            }}
          </p>
        </div>
      </div>

      <!-- Formulário -->
      <form (ngSubmit)="salvar()" class="p-4 sm:p-6">
        <!-- Campo Título -->
        <div class="mb-4">
          <label for="titulo" class="block text-sm font-medium text-slate-700 mb-2">
            <i class="fa-solid fa-heading mr-1 text-slate-400"></i>
            Título
          </label>
          <input
            id="titulo"
            type="text"
            [ngModel]="titulo()"
            (ngModelChange)="titulo.set($event)"
            name="titulo"
            placeholder="Digite um título chamativo..."
            class="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 placeholder-slate-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:bg-white transition-all duration-200"
            required
            aria-required="true"
          />
        </div>

        <!-- Campo Corpo -->
        <div class="mb-6">
          <label for="corpo" class="block text-sm font-medium text-slate-700 mb-2">
            <i class="fa-solid fa-align-left mr-1 text-slate-400"></i>
            Conteúdo
          </label>
          <textarea
            id="corpo"
            [ngModel]="corpo()"
            (ngModelChange)="corpo.set($event)"
            name="corpo"
            placeholder="Escreva o conteúdo do seu post aqui..."
            rows="8"
            class="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 placeholder-slate-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:bg-white resize-none transition-all duration-200"
            required
            aria-required="true"
          ></textarea>
        </div>

        <!-- Botões de ação -->
        <div
          class="flex flex-col-reverse sm:flex-row gap-3 sm:justify-end pt-4 border-t border-slate-100"
        >
          <button
            type="button"
            (click)="cancelar()"
            class="flex items-center justify-center gap-2 px-6 py-2.5 bg-slate-100 text-slate-700 rounded-xl hover:bg-slate-200 font-medium transition-all duration-200"
          >
            <i class="fa-solid fa-xmark"></i>
            Cancelar
          </button>
          <button
            type="submit"
            [disabled]="isSaving()"
            class="flex items-center justify-center gap-2 px-6 py-2.5 bg-blue-600 text-white rounded-xl hover:bg-blue-700 font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"
          >
            @if (isSaving()) {
            <i class="fa-solid fa-spinner animate-spin"></i>
            <span>Salvando...</span>
            } @else {
            <i class="fa-solid fa-paper-plane"></i>
            <span>{{ isEdicao ? 'Salvar Alterações' : 'Publicar' }}</span>
            }
          </button>
        </div>
      </form>
    </div>
    }
  </div>
</div>
